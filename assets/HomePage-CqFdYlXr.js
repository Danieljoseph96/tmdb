import{a as e,i as t,n,t as r}from"./index-CeJLlBLL.js";import{i,n as a,r as o,t as s}from"./Navbar-jZvHpJKE.js";var c=e(t(),1),l=r();function u({searchQuery:e}){let[t,r]=(0,c.useState)([]),[s,u]=(0,c.useState)(1),[d,f]=(0,c.useState)(0),p=n(),m=async()=>{try{let t=e?`https://api.themoviedb.org/3/search/movie?api_key=${o}&query=${encodeURIComponent(e)}&page=${s}`:`${i}/popular?page=${s}&api_key=${o}`,n=await(await fetch(t,{method:`GET`,headers:{accept:`application/json`,Authorization:`Bearer ${a}`}})).json();r(n.results||[]),f(n.total_pages||0)}catch(e){console.error(`Error fetching movies:`,e)}};return(0,c.useEffect)(()=>{m()},[s,e]),(0,l.jsxs)(`div`,{className:`cards-page`,children:[(0,l.jsx)(`h1`,{className:`page-title`,children:e?`Search Results for "${e}"`:`Popular Movies`}),(0,l.jsx)(`div`,{className:`cards-grid`,children:t.map(e=>(0,l.jsxs)(`div`,{className:`card`,onClick:()=>p(`/video/${e.id}`),children:[(0,l.jsx)(`img`,{src:e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:`https://via.placeholder.com/300x450`,alt:e.title,className:`movie-image`}),(0,l.jsxs)(`div`,{className:`card-content`,children:[(0,l.jsx)(`h2`,{className:`card-title`,children:e.title}),(0,l.jsxs)(`p`,{className:`rating`,children:[`â­ `,e.vote_average]}),(0,l.jsxs)(`p`,{className:`release`,children:[`ðŸ“… `,e.release_date]})]})]},e.id))}),d>1&&(0,l.jsxs)(`div`,{className:`pagination`,children:[(0,l.jsx)(`button`,{onClick:()=>u(e=>Math.max(e-1,1)),disabled:s===1,children:`â¬… Previous`}),(0,l.jsxs)(`span`,{children:[` Page `,s,` `]}),(0,l.jsx)(`button`,{onClick:()=>u(e=>e+1),disabled:s>=d,children:`Next âž¡`})]})]})}function d(){let[e,t]=(0,c.useState)(null),[r,u]=(0,c.useState)(!1),d=n();return(0,c.useEffect)(()=>{let e=async()=>{try{let e=Math.floor(Math.random()*20)+1,n=await(await fetch(`${i}/popular?page=${e}&api_key=${o}`,{method:`GET`,headers:{accept:`application/json`,Authorization:`Bearer ${a}`}})).json();if(!n.results||n.results.length===0)return;let r=n.results[Math.floor(Math.random()*n.results.length)];u(!0),setTimeout(()=>{t(r),u(!1)},500)}catch(e){console.error(`Error fetching banner:`,e)}};e();let n=setInterval(e,3e4);return()=>clearInterval(n)},[]),e?(0,l.jsxs)(`div`,{className:`relative min-h-screen text-white transition-opacity duration-500 ${r?`opacity-0`:`opacity-100`}`,style:{backgroundImage:e.backdrop_path?`url(https://image.tmdb.org/t/p/original${e.backdrop_path})`:`none`,backgroundSize:`cover`,backgroundPosition:`center`},children:[(0,l.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-r from-black via-black/80 to-transparent`}),(0,l.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent`}),(0,l.jsxs)(`div`,{className:`relative z-10`,children:[(0,l.jsx)(s,{}),(0,l.jsx)(`div`,{className:`flex items-center min-h-[80vh] px-6 md:px-16`,children:(0,l.jsxs)(`div`,{className:`max-w-2xl space-y-6`,children:[(0,l.jsx)(`h1`,{className:`text-4xl md:text-6xl font-bold drop-shadow-lg`,children:e.title}),(0,l.jsx)(`p`,{className:`text-lg text-gray-200 leading-relaxed`,children:e.overview?e.overview.slice(0,200)+`...`:`No description available.`}),(0,l.jsxs)(`div`,{className:`space-x-4`,children:[(0,l.jsx)(`button`,{onClick:()=>d(`/video/${e.id}`),className:`bg-white text-black px-6 py-2 rounded font-semibold hover:bg-gray-300 transition`,children:`â–¶ Play`}),(0,l.jsx)(`button`,{onClick:()=>d(`/video/${e.id}`),className:`bg-gray-700/70 px-6 py-2 rounded font-semibold hover:bg-gray-600 transition`,children:`More Info`})]})]})})]})]}):(0,l.jsx)(`div`,{className:`min-h-screen bg-black flex items-center justify-center text-white text-xl`,children:`Loading banner...`})}function f(){let[e,t]=(0,c.useState)(null);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d,{}),(0,l.jsx)(u,{data:e})]})}export{f as default};
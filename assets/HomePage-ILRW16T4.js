import{a as e,i as t,n,o as r,t as i}from"./index-D3QJwaL2.js";import{i as a,n as o,r as s,t as c}from"./Navbar-DlbL_XC0.js";var l=t(),u=r(e(),1),d=i();function f({searchQuery:e}){let[t,r]=(0,u.useState)([]),[i,c]=(0,u.useState)(1),[l,f]=(0,u.useState)(0),p=n(),m=async()=>{try{let t=e?`https://api.themoviedb.org/3/search/movie?api_key=${s}&query=${encodeURIComponent(e)}&page=${i}`:`${a}/popular?page=${i}&api_key=${s}`,n=await(await fetch(t,{method:`GET`,headers:{accept:`application/json`,Authorization:`Bearer ${o}`}})).json();r(n.results||[]),f(n.total_pages||0)}catch(e){console.error(`Error fetching movies:`,e)}};return(0,u.useEffect)(()=>{m()},[i,e]),(0,d.jsxs)(`div`,{className:`cards-page`,children:[(0,d.jsx)(`h1`,{className:`page-title`,children:e?`Search Results for "${e}"`:`Popular Movies`}),(0,d.jsx)(`div`,{className:`cards-grid`,children:t.map(e=>(0,d.jsxs)(`div`,{className:`card`,onClick:()=>p(`/video/${e.id}`),children:[(0,d.jsx)(`img`,{src:e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:`https://via.placeholder.com/300x450`,alt:e.title,className:`movie-image`}),(0,d.jsxs)(`div`,{className:`card-content`,children:[(0,d.jsx)(`h2`,{className:`card-title`,children:e.title}),(0,d.jsxs)(`p`,{className:`rating`,children:[`â­ `,e.vote_average]}),(0,d.jsxs)(`p`,{className:`release`,children:[`ðŸ“… `,e.release_date]})]})]},e.id))}),l>1&&(0,d.jsxs)(`div`,{className:`pagination`,children:[(0,d.jsx)(`button`,{onClick:()=>c(e=>Math.max(e-1,1)),disabled:i===1,children:`â¬… Previous`}),(0,d.jsxs)(`span`,{children:[` Page `,i,` `]}),(0,d.jsx)(`button`,{onClick:()=>c(e=>e+1),disabled:i>=l,children:`Next âž¡`})]})]})}function p(){let[e,t]=(0,u.useState)(null),[r,i]=(0,u.useState)(!1),l=n();return(0,u.useEffect)(()=>{let e=async()=>{try{let e=Math.floor(Math.random()*20)+1,n=await(await fetch(`${a}/popular?page=${e}&api_key=${s}`,{method:`GET`,headers:{accept:`application/json`,Authorization:`Bearer ${o}`}})).json();if(!n.results||n.results.length===0)return;let r=n.results[Math.floor(Math.random()*n.results.length)];i(!0),setTimeout(()=>{t(r),i(!1)},500)}catch(e){console.error(`Error fetching banner:`,e)}};e();let n=setInterval(e,3e4);return()=>clearInterval(n)},[]),e?(0,d.jsxs)(`div`,{className:`relative min-h-screen text-white transition-opacity duration-500 ${r?`opacity-0`:`opacity-100`}`,style:{backgroundImage:e.backdrop_path?`url(https://image.tmdb.org/t/p/original${e.backdrop_path})`:`none`,backgroundSize:`cover`,backgroundPosition:`center`},children:[(0,d.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-r from-black via-black/80 to-transparent`}),(0,d.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent`}),(0,d.jsxs)(`div`,{className:`relative z-10`,children:[(0,d.jsx)(c,{}),(0,d.jsx)(`div`,{className:`flex items-center min-h-[80vh] px-6 md:px-16`,children:(0,d.jsxs)(`div`,{className:`max-w-2xl space-y-6`,children:[(0,d.jsx)(`h1`,{className:`text-4xl md:text-6xl font-bold drop-shadow-lg`,children:e.title}),(0,d.jsx)(`p`,{className:`text-lg text-gray-200 leading-relaxed`,children:e.overview?e.overview.slice(0,200)+`...`:`No description available.`}),(0,d.jsxs)(`div`,{className:`space-x-4`,children:[(0,d.jsx)(`button`,{onClick:()=>l(`/video/${e.id}`),className:`bg-white text-black px-6 py-2 rounded font-semibold hover:bg-gray-300 transition`,children:`â–¶ Play`}),(0,d.jsx)(`button`,{onClick:()=>l(`/video/${e.id}`),className:`bg-gray-700/70 px-6 py-2 rounded font-semibold hover:bg-gray-600 transition`,children:`More Info`})]})]})})]})]}):(0,d.jsx)(`div`,{className:`min-h-screen bg-black flex items-center justify-center text-white text-xl`,children:`Loading banner...`})}function m(){let e=(0,l.c)(3),[t]=(0,u.useState)(null),n;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,d.jsx)(p,{}),e[0]=n):n=e[0];let r;return e[1]===t?r=e[2]:(r=(0,d.jsxs)(d.Fragment,{children:[n,(0,d.jsx)(f,{data:t})]}),e[1]=t,e[2]=r),r}export{m as default};